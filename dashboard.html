<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - CustomWeb SPAN</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/sidebar.js"></script>
    <script src="js/components.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Sidebar Placeholder -->
    <div id="sidebar-placeholder"></div>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper" id="mainWrapper">
        <div class="container">
            <h2 style="margin-bottom: 1.5rem;">Dashboard</h2>

            <!-- Statistics Cards Row 1 -->
            <div class="grid grid-4" style="margin-bottom: 2rem;">
                <div class="stat-card success">
                    <div class="stat-label">‚úÖ Total Satker Aktif</div>
                    <div class="stat-value">3,367</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">+12% dari bulan lalu</div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-label">‚è≥ Proses Revisi</div>
                    <div class="stat-value">247</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">32 menunggu validasi</div>
                </div>
                <div class="stat-card danger">
                    <div class="stat-label">‚ùå Error/Reject</div>
                    <div class="stat-value">8</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">Perlu perbaikan</div>
                </div>
                <div class="stat-card info">
                    <div class="stat-label">üìä Total DIPA</div>
                    <div class="stat-value">3,112</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">DIPA sudah dibuat</div>
                </div>
            </div>

            <!-- Statistics Cards Row 2 -->
            <div class="grid grid-4" style="margin-bottom: 2rem;">
                <div class="stat-card">
                    <div class="stat-label">üí∞ Total Pagu</div>
                    <div class="stat-value" style="font-size: 1.5rem;">Rp 2.5T</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">Tahun Anggaran 2025</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">üì§ Penerimaan Hari Ini</div>
                    <div class="stat-value">45</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">ADK diterima dari SAKTI</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">‚úì Validasi Berhasil</div>
                    <div class="stat-value">207</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">Dari 247 proses</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">üìÆ Data Posting</div>
                    <div class="stat-value">2,567</div>
                    <div style="font-size: 0.875rem; opacity: 0.8; margin-top: 0.5rem;">Sudah diposting ke EBS</div>
                </div>
            </div>

            <!-- Charts Row -->
            <div class="grid grid-2" style="margin-bottom: 2rem;">
                <!-- Upload Trend Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìà Trend Penerimaan ADK (7 Hari Terakhir)</h3>
                    </div>
                    <div style="padding: 1rem;">
                        <canvas id="uploadTrendChart" style="max-height: 300px;"></canvas>
                    </div>
                </div>

                <!-- Status Distribution Chart -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìä Distribusi Status Revisi</h3>
                    </div>
                    <div style="padding: 1rem;">
                        <canvas id="statusChart" style="max-height: 300px;"></canvas>
                    </div>
                </div>
            </div>

            <!-- Activity Table and Top Kementerian -->
            <div class="grid grid-2" style="margin-bottom: 2rem;">
                <!-- Recent Activity -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üìã Aktivitas Terbaru</h3>
                    </div>
                    <div style="padding: 1rem;">
                        <div style="display: flex; flex-direction: column; gap: 1rem;">
                            <div style="padding: 0.75rem; border-left: 3px solid var(--success-color); background: #f0fdf4;">
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">Penerimaan ADK dari SAKTI</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">Kementerian Keuangan - 5 menit yang lalu</div>
                            </div>
                            <div style="padding: 0.75rem; border-left: 3px solid var(--primary-color); background: #eff6ff;">
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">Validasi Selesai</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">Kementerian Pendidikan - 15 menit yang lalu</div>
                            </div>
                            <div style="padding: 0.75rem; border-left: 3px solid var(--warning-color); background: #fffbeb;">
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">Proses Validasi</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">Kementerian Kesehatan - 30 menit yang lalu</div>
                            </div>
                            <div style="padding: 0.75rem; border-left: 3px solid var(--success-color); background: #f0fdf4;">
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">DIPA Created</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">Kementerian Pertahanan - 1 jam yang lalu</div>
                            </div>
                            <div style="padding: 0.75rem; border-left: 3px solid var(--danger-color); background: #fef2f2;">
                                <div style="font-weight: 600; margin-bottom: 0.25rem;">Validation Error</div>
                                <div style="font-size: 0.875rem; color: var(--text-secondary);">Kementerian Sosial - 2 jam yang lalu</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Top Kementerian -->
                <div class="card">
                    <div class="card-header">
                        <h3 class="card-title">üèÜ Top 5 Kementerian Aktif</h3>
                    </div>
                    <div style="padding: 1rem;">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>Rank</th>
                                    <th>Kementerian</th>
                                    <th>Satker</th>
                                    <th>Status</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td><span style="background: gold; color: black; padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600;">ü•á</span></td>
                                    <td>Kementerian Keuangan</td>
                                    <td>487</td>
                                    <td><span class="badge badge-success">95%</span></td>
                                </tr>
                                <tr>
                                    <td><span style="background: silver; color: black; padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600;">ü•à</span></td>
                                    <td>Kementerian Pendidikan</td>
                                    <td>423</td>
                                    <td><span class="badge badge-success">92%</span></td>
                                </tr>
                                <tr>
                                    <td><span style="background: #cd7f32; color: white; padding: 0.25rem 0.5rem; border-radius: 4px; font-weight: 600;">ü•â</span></td>
                                    <td>Kementerian Kesehatan</td>
                                    <td>389</td>
                                    <td><span class="badge badge-success">89%</span></td>
                                </tr>
                                <tr>
                                    <td>4</td>
                                    <td>Kementerian Pertahanan</td>
                                    <td>356</td>
                                    <td><span class="badge badge-warning">85%</span></td>
                                </tr>
                                <tr>
                                    <td>5</td>
                                    <td>Kementerian Dalam Negeri</td>
                                    <td>312</td>
                                    <td><span class="badge badge-warning">82%</span></td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Progress Bars -->
            <div class="card">
                <div class="card-header">
                    <h3 class="card-title">üìä Progress Keseluruhan</h3>
                </div>
                <div style="padding: 1.5rem;">
                    <div style="margin-bottom: 1.5rem;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span style="font-weight: 600;">Penerimaan ADK dari SAKTI</span>
                            <span style="color: var(--text-secondary);">3,112 / 3,367 (92%)</span>
                        </div>
                        <div style="height: 24px; background: #e5e7eb; border-radius: 12px; overflow: hidden;">
                            <div style="height: 100%; width: 92%; background: linear-gradient(90deg, #10b981, #059669); display: flex; align-items: center; justify-content: flex-end; padding-right: 0.5rem; color: white; font-size: 0.875rem; font-weight: 600;">92%</div>
                        </div>
                    </div>
                    <div style="margin-bottom: 1.5rem;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span style="font-weight: 600;">Validasi</span>
                            <span style="color: var(--text-secondary);">2,897 / 3,112 (93%)</span>
                        </div>
                        <div style="height: 24px; background: #e5e7eb; border-radius: 12px; overflow: hidden;">
                            <div style="height: 100%; width: 93%; background: linear-gradient(90deg, #3b82f6, #2563eb); display: flex; align-items: center; justify-content: flex-end; padding-right: 0.5rem; color: white; font-size: 0.875rem; font-weight: 600;">93%</div>
                        </div>
                    </div>
                    <div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <span style="font-weight: 600;">Posting</span>
                            <span style="color: var(--text-secondary);">2,567 / 2,897 (89%)</span>
                        </div>
                        <div style="height: 24px; background: #e5e7eb; border-radius: 12px; overflow: hidden;">
                            <div style="height: 100%; width: 89%; background: linear-gradient(90deg, #8b5cf6, #7c3aed); display: flex; align-items: center; justify-content: flex-end; padding-right: 0.5rem; color: white; font-size: 0.875rem; font-weight: 600;">89%</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        // Initialize page components
        initPageComponents({
            activePage: 'dashboard',
            userData: {
                avatar: 'DJA',
                role: 'Echelon IV DJA',
                tahun: '2025',
                jenisDok: 'RKAKL'
            }
        });

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                sessionStorage.clear();
                window.location.href = 'index.html';
            }
        }

        // Upload Trend Chart
        const ctxTrend = document.getElementById('uploadTrendChart').getContext('2d');
        new Chart(ctxTrend, {
            type: 'line',
            data: {
                labels: ['Sen', 'Sel', 'Rab', 'Kam', 'Jum', 'Sab', 'Min'],
                datasets: [{
                    label: 'Penerimaan ADK dari SAKTI',
                    data: [32, 45, 38, 51, 49, 62, 45],
                    borderColor: '#6366f1',
                    backgroundColor: 'rgba(99, 102, 241, 0.1)',
                    tension: 0.4,
                    fill: true
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: true,
                        position: 'top'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Status Distribution Chart
        const ctxStatus = document.getElementById('statusChart').getContext('2d');
        new Chart(ctxStatus, {
            type: 'doughnut',
            data: {
                labels: ['Selesai', 'Proses', 'Menunggu', 'Error'],
                datasets: [{
                    data: [207, 32, 15, 8],
                    backgroundColor: [
                        '#10b981',
                        '#3b82f6',
                        '#f59e0b',
                        '#ef4444'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: true,
                plugins: {
                    legend: {
                        display: true,
                        position: 'right'
                    }
                }
            }
        });
    </script>
</body>
</html>
