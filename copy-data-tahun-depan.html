<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Copy Data ke Tahun Depan - CustomWeb SPAN</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/sidebar.js"></script>
    <script src="js/components.js"></script>
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Sidebar Placeholder -->
    <div id="sidebar-placeholder"></div>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper" id="mainWrapper">
        <div class="container">
            <h2 style="margin-bottom: 1.5rem;">Copy Data ke Tahun Depan</h2>

            <!-- Konfigurasi Copy Data -->
            <div class="card" style="margin-bottom: 1.5rem;">
                <h3 style="margin-bottom: 1rem; font-size: 1.1rem; font-weight: 600;">Konfigurasi Copy Data</h3>
                <div style="display: flex; gap: 2rem; align-items: flex-end; flex-wrap: wrap;">
                    <div class="form-group" style="flex: 1; min-width: 200px;">
                        <label class="form-label" style="font-weight: 600; margin-bottom: 0.5rem;">Tahun Sumber:</label>
                        <select class="form-control" id="tahunSumber" style="width: 100%;">
                            <option value="">-- Pilih Tahun Sumber --</option>
                            <option value="2024">2024</option>
                            <option value="2025" selected>2025</option>
                            <option value="2026">2026</option>
                            <option value="2027">2027</option>
                        </select>
                    </div>
                    <div class="form-group" style="flex: 1; min-width: 200px;">
                        <label class="form-label" style="font-weight: 600; margin-bottom: 0.5rem;">Tahun Target:</label>
                        <select class="form-control" id="tahunTarget" style="width: 100%;">
                            <option value="">-- Pilih Tahun Target --</option>
                            <option value="2024">2024</option>
                            <option value="2025">2025</option>
                            <option value="2026" selected>2026</option>
                            <option value="2027">2027</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <button class="btn btn-primary" onclick="loadDataByYear()" style="padding: 0.5rem 1.5rem;">
                            Copy Data
                        </button>
                    </div>
                </div>
            </div>

            <!-- Data Table Section -->
            <div class="card">
                <div style="display: flex; justify-content: flex-end; gap: 0.5rem; margin-bottom: 1rem; padding: 0 1rem; padding-top: 1rem;">
                    <button class="btn btn-secondary" onclick="refreshData()">
                        Refresh
                    </button>
                    <button class="btn btn-primary" onclick="prosesData()">
                        Proses
                    </button>
                </div>
                <!-- Data Table -->
                <div class="table-container">
                    <table class="table" style="table-layout: fixed;">
                        <thead>
                            <tr>
                                <th style="width: 50px; text-align: center;"><input type="checkbox" id="checkAll" onchange="toggleAllChecks(this)"></th>
                                <th style="width: 350px; text-align: left;">Target Table</th>
                                <th style="width: 120px; text-align: left;">Status</th>
                                <th style="width: 180px; text-align: left;">Copy Tgl Awal</th>
                                <th style="width: 120px; text-align: left;">Pembuat</th>
                                <th style="width: 180px; text-align: left;">Tgl Upd Akhir</th>
                                <th style="width: 120px; text-align: left;">Diupdate</th>
                            </tr>
                        </thead>
                        <tbody id="dataTable">
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_COMMON_CODE</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:26:49</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:26:49</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_COMMON_DETAIL_CODE</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:27</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:31</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_CONTENTS_NOTI</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:36</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:28:00</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_REPORT_SIGNEE</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:32</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:32</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_RKAKL_BUDGET_DATE</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:28</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:28</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_RKAKL_DSCLMR</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:29</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:29</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_RKAKL_JNSREVISI</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:30</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:30</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_AKUN</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:31</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:31</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_BEBAN</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:32</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:32</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_BKPK</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:33</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:33</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_BLOKIR</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:34</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:34</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_CTARIK</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:35</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:35</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_DEKON</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:36</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:36</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_DEPT</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:37</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:37</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_ES2</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:38</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:38</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_FUNGSI</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:39</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:39</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_GBKPK</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:40</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:40</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_GIAT</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:41</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:41</td>
                                <td>Cadmin</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;"><input type="checkbox" class="row-checkbox"></td>
                                <td>SPAN_ADK_T_GIATPJ</td>
                                <td>Success</td>
                                <td>26-Sep-2025 15:27:42</td>
                                <td>Cadmin</td>
                                <td>26-Sep-2025 15:27:42</td>
                                <td>Cadmin</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        // Initialize page components
        initPageComponents({
            activePage: 'manage-basic-info',
            userData: {
                avatar: 'DJA',
                role: 'Echelon IV DJA',
                tahun: '2025',
                jenisDok: 'RKAKL'
            }
        });

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                sessionStorage.clear();
                window.location.href = 'index.html';
            }
        }

        function refreshData() {
            alert('Memuat ulang data...');
            // Di sini bisa ditambahkan logika untuk refresh data dari server
        }

        function prosesData() {
            const selectedRows = document.querySelectorAll('.row-checkbox:checked');
            if (selectedRows.length === 0) {
                alert('Mohon pilih minimal satu data untuk diproses!');
                return;
            }

            if (confirm(`Apakah Anda yakin ingin memproses ${selectedRows.length} data yang dipilih?`)) {
                alert(`Memproses ${selectedRows.length} data...`);
                // Di sini bisa ditambahkan logika untuk proses data
            }
        }

        function toggleAllChecks(checkbox) {
            const checkboxes = document.querySelectorAll('.row-checkbox');
            checkboxes.forEach(cb => {
                cb.checked = checkbox.checked;
            });
        }

        function loadDataByYear() {
            const tahunSumber = document.getElementById('tahunSumber').value;
            const tahunTarget = document.getElementById('tahunTarget').value;

            if (!tahunSumber || !tahunTarget) {
                alert('Mohon pilih Tahun Sumber dan Tahun Target terlebih dahulu!');
                return;
            }

            if (tahunSumber === tahunTarget) {
                alert('Tahun Sumber dan Tahun Target tidak boleh sama!');
                return;
            }

            // Di sini bisa ditambahkan logika untuk load data berdasarkan tahun
            alert(`Memuat data dari tahun ${tahunSumber} ke tahun ${tahunTarget}...`);
            // Contoh: fetch data dari server berdasarkan tahun sumber dan target
            // fetch(`/api/copy-data?tahunSumber=${tahunSumber}&tahunTarget=${tahunTarget}`)
            //     .then(response => response.json())
            //     .then(data => {
            //         // Update tabel dengan data baru
            //     });
        }
    </script>

    <style>
        /* Table Container for Horizontal Scroll */
        .table-container {
            overflow-x: auto;
            position: relative;
        }

        /* Force table layout fixed to respect column widths */
        .table-container .table {
            table-layout: fixed !important;
            width: 100%;
        }

        /* Table Header Styles */
        .table thead tr th {
            background-color: #f8f9fa;
            font-weight: 600;
            border: 1px solid #dee2e6;
            border-bottom: 2px solid #dee2e6;
            padding: 0.75rem;
        }

        .table th {
            text-align: left;
        }

        .table td {
            text-align: left;
            padding: 0.75rem;
            border: 1px solid #dee2e6;
        }

        /* Freeze/Sticky Columns - Checkbox */
        .table thead tr th:nth-child(1),
        .table tbody tr td:nth-child(1) {
            position: sticky;
            left: 0;
            z-index: 100;
            background-color: #f8f9fa;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            width: 50px;
            min-width: 50px;
            max-width: 50px;
        }

        .table tbody tr td:nth-child(1) {
            background-color: white;
            z-index: 100;
        }

        /* Freeze/Sticky Columns - Target Table */
        .table thead tr th:nth-child(2),
        .table tbody tr td:nth-child(2) {
            position: sticky;
            left: 50px;
            z-index: 100;
            background-color: #f8f9fa;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            width: 350px;
            min-width: 350px;
            max-width: 350px;
        }

        .table tbody tr td:nth-child(2) {
            background-color: white;
            z-index: 100;
        }

        /* Freeze/Sticky Columns - Status */
        .table thead tr th:nth-child(3),
        .table tbody tr td:nth-child(3) {
            position: sticky;
            left: 400px;
            z-index: 100;
            background-color: #f8f9fa;
            box-shadow: 2px 0 5px rgba(0,0,0,0.1);
            width: 120px;
            min-width: 120px;
            max-width: 120px;
        }

        .table tbody tr td:nth-child(3) {
            background-color: white;
            z-index: 100;
        }

        /* Ensure non-sticky columns (after Status) are scrollable - explicitly remove z-index */
        .table thead tr th:nth-child(n+4),
        .table tbody tr td:nth-child(n+4) {
            position: static !important;
            z-index: auto !important;
        }

        /* Ensure scrollable columns have appropriate width */
        /* Copy Tgl Awal */
        .table thead tr th:nth-child(4),
        .table tbody tr td:nth-child(4) {
            width: 180px !important;
            min-width: 180px !important;
            max-width: 180px !important;
        }

        /* Pembuat */
        .table thead tr th:nth-child(5),
        .table tbody tr td:nth-child(5) {
            width: 120px !important;
            min-width: 120px !important;
            max-width: 120px !important;
        }

        /* Tgl Upd Akhir */
        .table thead tr th:nth-child(6),
        .table tbody tr td:nth-child(6) {
            width: 180px !important;
            min-width: 180px !important;
            max-width: 180px !important;
        }

        /* Diupdate */
        .table thead tr th:nth-child(7),
        .table tbody tr td:nth-child(7) {
            width: 120px !important;
            min-width: 120px !important;
            max-width: 120px !important;
        }

        /* Maintain background colors for sticky cells on hover */
        .table tbody tr:hover td:nth-child(1),
        .table tbody tr:hover td:nth-child(2),
        .table tbody tr:hover td:nth-child(3) {
            background-color: var(--light-color);
        }

        .table tbody tr:hover {
            background-color: var(--light-color);
        }
    </style>
</body>
</html>
