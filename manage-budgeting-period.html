<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Manage Budgeting Period - CustomWeb SPAN</title>
    <link rel="stylesheet" href="css/style.css">
    <script src="js/sidebar.js"></script>
    <script src="js/components.js"></script>
</head>
<body>
    <!-- Header Placeholder -->
    <div id="header-placeholder"></div>

    <!-- Sidebar Placeholder -->
    <div id="sidebar-placeholder"></div>

    <!-- Main Content Wrapper -->
    <div class="main-wrapper" id="mainWrapper">
        <div class="container">
            <h2 style="margin-bottom: 1.5rem;">Manage Budgeting Period</h2>

            <!-- Data Table Section -->
            <div class="card">
                <!-- Data Table -->
                <div class="table-container">
                    <table class="table" style="table-layout: fixed;">
                        <thead>
                            <tr>
                                <th style="text-align: center;">Bugdet Type</th>
                                <th colspan="2" style="text-align: center;">Start Date ~ End Date</th>
                                <th style="text-align: center;">Updater</th>
                                <th style="text-align: center;">Update Date</th>
                            </tr>
                        </thead>
                        <tbody id="dataTable">
                            <tr>
                                <td style="text-align: center;">Himpunan</td>
                                <td colspan="2">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; justify-content: center;">
                                        <div style="position: relative; flex: 1; max-width: 150px;">
                                            <input type="text" class="form-control date-input" value="01-04-2024" placeholder="dd-mm-yyyy" style="padding-right: 2.5rem;">
                                            <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--text-secondary);">ðŸ“…</span>
                                        </div>
                                        <span style="color: var(--text-secondary);">~</span>
                                        <div style="position: relative; flex: 1; max-width: 150px;">
                                            <input type="text" class="form-control date-input" value="10-08-2024" placeholder="dd-mm-yyyy" style="padding-right: 2.5rem;">
                                            <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--text-secondary);">ðŸ“…</span>
                                        </div>
                                    </div>
                                </td>
                                <td style="text-align: center;">System Admin (Cadmin)</td>
                                <td style="text-align: center;">09-10-2024</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">Keppres</td>
                                <td colspan="2">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; justify-content: center;">
                                        <div style="position: relative; flex: 1; max-width: 150px;">
                                            <input type="text" class="form-control date-input" value="11-08-2024" placeholder="dd-mm-yyyy" style="padding-right: 2.5rem;">
                                            <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--text-secondary);">ðŸ“…</span>
                                        </div>
                                        <span style="color: var(--text-secondary);">~</span>
                                        <div style="position: relative; flex: 1; max-width: 150px;">
                                            <input type="text" class="form-control date-input" value="10-12-2024" placeholder="dd-mm-yyyy" style="padding-right: 2.5rem;">
                                            <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--text-secondary);">ðŸ“…</span>
                                        </div>
                                    </div>
                                </td>
                                <td style="text-align: center;">System Admin (Cadmin)</td>
                                <td style="text-align: center;">09-10-2024</td>
                            </tr>
                            <tr>
                                <td style="text-align: center;">Revisi</td>
                                <td colspan="2">
                                    <div style="display: flex; align-items: center; gap: 0.5rem; justify-content: center;">
                                        <div style="position: relative; flex: 1; max-width: 150px;">
                                            <input type="text" class="form-control date-input" value="10-12-2024" placeholder="dd-mm-yyyy" style="padding-right: 2.5rem;">
                                            <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--text-secondary);">ðŸ“…</span>
                                        </div>
                                        <span style="color: var(--text-secondary);">~</span>
                                        <div style="position: relative; flex: 1; max-width: 150px;">
                                            <input type="text" class="form-control date-input" value="31-12-2025" placeholder="dd-mm-yyyy" style="padding-right: 2.5rem;">
                                            <span style="position: absolute; right: 10px; top: 50%; transform: translateY(-50%); pointer-events: none; color: var(--text-secondary);">ðŸ“…</span>
                                        </div>
                                    </div>
                                </td>
                                <td style="text-align: center;">System Admin (Cadmin)</td>
                                <td style="text-align: center;">09-10-2024</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- Action Button -->
                <div style="display: flex; justify-content: flex-end; margin-top: 1.5rem;">
                    <button class="btn btn-primary" onclick="simpanData()">
                        Simpan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer Placeholder -->
    <div id="footer-placeholder"></div>

    <script>
        // Initialize page components
        initPageComponents({
            activePage: 'manage-basic-info',
            userData: {
                avatar: 'DJA',
                role: 'Echelon IV DJA',
                tahun: '2025',
                jenisDok: 'RKAKL'
            }
        });

        function logout() {
            if (confirm('Apakah Anda yakin ingin logout?')) {
                sessionStorage.clear();
                window.location.href = 'index.html';
            }
        }

        function simpanData() {
            const dateInputs = document.querySelectorAll('.date-input');
            let isValid = true;
            
            dateInputs.forEach(input => {
                const value = input.value.trim();
                if (value && !/^\d{2}-\d{2}-\d{4}$/.test(value)) {
                    isValid = false;
                }
            });

            if (!isValid) {
                alert('Format tanggal tidak valid. Gunakan format dd-mm-yyyy');
                return;
            }

            alert('Data berhasil disimpan!');
            // Di sini bisa ditambahkan logika untuk menyimpan data ke server
        }

        // Initialize date picker (simple implementation)
        document.querySelectorAll('.date-input').forEach(input => {
            input.addEventListener('focus', function() {
                this.type = 'date';
            });
            input.addEventListener('blur', function() {
                if (this.value) {
                    // Convert date format from YYYY-MM-DD to DD-MM-YYYY
                    const date = new Date(this.value);
                    if (!isNaN(date.getTime())) {
                        const day = String(date.getDate()).padStart(2, '0');
                        const month = String(date.getMonth() + 1).padStart(2, '0');
                        const year = date.getFullYear();
                        this.type = 'text';
                        this.value = `${day}-${month}-${year}`;
                    }
                }
            });
        });
    </script>

    <style>
        /* Table Container */
        .table-container {
            overflow-x: auto;
            position: relative;
        }

        /* Force table layout fixed to respect column widths */
        .table-container .table {
            table-layout: fixed !important;
            width: 100%;
        }

        /* Table Header Styles */
        .table thead tr th {
            background-color: #f8f9fa;
            font-weight: 600;
            border: 1px solid #dee2e6;
            border-bottom: 2px solid #dee2e6;
            padding: 0.75rem;
        }

        .table th {
            text-align: center;
        }

        .table td {
            text-align: left;
            padding: 0.75rem;
            border: 1px solid #dee2e6;
        }

        /* Date input styling */
        .date-input {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .date-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        .table tbody tr:hover {
            background-color: var(--light-color);
        }
    </style>
</body>
</html>
